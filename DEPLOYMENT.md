# NOFX AIäº¤æ˜“ç³»ç»Ÿ - Zeaburéƒ¨ç½²æŒ‡å—

## ğŸ“‹ éƒ¨ç½²æ¦‚è§ˆ

æœ¬æ–‡æ¡£æä¾›äº†å°†NOFX AIäº¤æ˜“ç³»ç»Ÿéƒ¨ç½²åˆ°Zeaburå¹³å°çš„å®Œæ•´æŒ‡å—ã€‚ç³»ç»ŸåŒ…å«ï¼š

- **åç«¯**: Goè¯­è¨€å¼€å‘çš„AIäº¤æ˜“å¼•æ“
- **å‰ç«¯**: React + TypeScript + Viteå¼€å‘çš„ç®¡ç†ç•Œé¢
- **æ•°æ®åº“**: PostgreSQLæ•°æ®å­˜å‚¨
- **ç¼“å­˜**: Redisç¼“å­˜æœåŠ¡

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ (æ¨è)

#### Windowsç”¨æˆ·
```powershell
# è®¾ç½®æ‰§è¡Œç­–ç•¥ï¼ˆå¦‚æœéœ€è¦ï¼‰
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser

# è¿è¡Œéƒ¨ç½²è„šæœ¬
.\deploy-zeabur.ps1

# è·³è¿‡æµ‹è¯•éƒ¨ç½²
.\deploy-zeabur.ps1 -SkipTests

# è·³è¿‡æ„å»ºéƒ¨ç½²
.\deploy-zeabur.ps1 -SkipBuild
```

#### Linux/macOSç”¨æˆ·
```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x deploy-zeabur.sh

# è¿è¡Œéƒ¨ç½²è„šæœ¬
./deploy-zeabur.sh

# è·³è¿‡æµ‹è¯•éƒ¨ç½²
SKIP_TESTS=true ./deploy-zeabur.sh

# è·³è¿‡æ„å»ºéƒ¨ç½²
SKIP_BUILD=true ./deploy-zeabur.sh
```

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²

#### 1. å‡†å¤‡ç¯å¢ƒå˜é‡

å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿ï¼š
```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å†™å¿…è¦çš„é…ç½®ï¼š

```env
# äº¤æ˜“æ‰€APIå¯†é’¥
BINANCE_API_KEY=your_binance_api_key
BINANCE_SECRET_KEY=your_binance_secret_key
HYPERLIQUID_API_KEY=your_hyperliquid_api_key
HYPERLIQUID_SECRET_KEY=your_hyperliquid_secret_key

# AIæ¨¡å‹APIå¯†é’¥
QWEN_API_KEY=your_qwen_api_key
DEEPSEEK_API_KEY=your_deepseek_api_key

# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://username:password@host:port/database

# å…¶ä»–é…ç½®...
```

#### 2. æ„å»ºåº”ç”¨

**æ„å»ºåç«¯ï¼š**
```bash
# ä¸‹è½½ä¾èµ–
go mod download

# æ„å»ºåº”ç”¨
CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o nofx main.go
```

**æ„å»ºå‰ç«¯ï¼š**
```bash
cd web
npm install
npm run build
cd ..
```

#### 3. éƒ¨ç½²åˆ°Zeabur

1. è®¿é—® [Zeaburæ§åˆ¶å°](https://dash.zeabur.com)
2. åˆ›å»ºæ–°é¡¹ç›®ï¼š`nofx-ai-trading`
3. è¿æ¥Gitä»“åº“
4. æ·»åŠ æœåŠ¡ï¼š

**åç«¯æœåŠ¡ (Go):**
- æœåŠ¡ç±»å‹ï¼šGo
- æ„å»ºå‘½ä»¤ï¼š`go build -o nofx main.go`
- å¯åŠ¨å‘½ä»¤ï¼š`./nofx`
- ç«¯å£ï¼š8080
- å¥åº·æ£€æŸ¥ï¼š`/health`

**å‰ç«¯æœåŠ¡ (Static):**
- æœåŠ¡ç±»å‹ï¼šStatic
- æ„å»ºå‘½ä»¤ï¼š`npm run build`
- è¾“å‡ºç›®å½•ï¼š`dist`
- Nodeç‰ˆæœ¬ï¼š20

**æ•°æ®åº“æœåŠ¡:**
- æœåŠ¡ç±»å‹ï¼šPostgreSQL
- ç‰ˆæœ¬ï¼š15
- å­˜å‚¨ï¼š10GB

5. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆåœ¨æ¯ä¸ªæœåŠ¡çš„Environmentæ ‡ç­¾é¡µï¼‰

## ğŸ”§ é…ç½®è¯¦è§£

### åç«¯ç¯å¢ƒå˜é‡

| å˜é‡å | æè¿° | å¿…éœ€ | é»˜è®¤å€¼ |
|--------|------|------|--------|
| `PORT` | APIæœåŠ¡ç«¯å£ | å¦ | 8080 |
| `GIN_MODE` | Ginè¿è¡Œæ¨¡å¼ | å¦ | release |
| `DATABASE_URL` | æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸² | æ˜¯ | - |
| `BINANCE_API_KEY` | Binance APIå¯†é’¥ | æ˜¯ | - |
| `BINANCE_SECRET_KEY` | Binance Secretå¯†é’¥ | æ˜¯ | - |
| `QWEN_API_KEY` | é€šä¹‰åƒé—®APIå¯†é’¥ | æ˜¯ | - |
| `DEEPSEEK_API_KEY` | DeepSeek APIå¯†é’¥ | æ˜¯ | - |
| `DAILY_LOSS_LIMIT` | æ—¥æŸå¤±é™åˆ¶ | å¦ | 1000 |
| `MAX_DRAWDOWN_PERCENT` | æœ€å¤§å›æ’¤ç™¾åˆ†æ¯” | å¦ | 10 |
| `LEVERAGE` | æ æ†å€æ•° | å¦ | 10 |

### å‰ç«¯ç¯å¢ƒå˜é‡

| å˜é‡å | æè¿° | å¿…éœ€ | é»˜è®¤å€¼ |
|--------|------|------|--------|
| `VITE_API_URL` | åç«¯APIåœ°å€ | æ˜¯ | - |
| `VITE_SUPABASE_URL` | Supabaseé¡¹ç›®URL | å¦ | - |
| `VITE_SUPABASE_ANON_KEY` | SupabaseåŒ¿åå¯†é’¥ | å¦ | - |

## ğŸ“Š ç›‘æ§å’Œå¥åº·æ£€æŸ¥

### å¥åº·æ£€æŸ¥ç«¯ç‚¹

- **åç«¯å¥åº·æ£€æŸ¥**: `GET /health`
- **å‰ç«¯é¡µé¢æ£€æŸ¥**: è®¿é—®æ ¹è·¯å¾„ `/`
- **APIåŠŸèƒ½æ£€æŸ¥**: `GET /api/traders`

### ç›‘æ§æŒ‡æ ‡

ç³»ç»Ÿæä¾›ä»¥ä¸‹ç›‘æ§æŒ‡æ ‡ï¼š

1. **ç³»ç»ŸæŒ‡æ ‡**
   - CPUä½¿ç”¨ç‡
   - å†…å­˜ä½¿ç”¨ç‡
   - ç£ç›˜ä½¿ç”¨ç‡
   - ç½‘ç»œæµé‡

2. **åº”ç”¨æŒ‡æ ‡**
   - APIå“åº”æ—¶é—´
   - è¯·æ±‚æˆåŠŸç‡
   - æ´»è·ƒäº¤æ˜“è€…æ•°é‡
   - äº¤æ˜“æ‰§è¡Œå»¶è¿Ÿ

3. **ä¸šåŠ¡æŒ‡æ ‡**
   - æ€»èµ„äº§ä»·å€¼
   - æ—¥æ”¶ç›Šç‡
   - æœ€å¤§å›æ’¤
   - äº¤æ˜“é¢‘ç‡

## ğŸ”’ å®‰å…¨é…ç½®

### ç½‘ç»œå®‰å…¨

- æ‰€æœ‰æœåŠ¡é—´é€šä¿¡ä½¿ç”¨HTTPS
- æ•°æ®åº“ä»…å…è®¸åç«¯æœåŠ¡è®¿é—®
- APIå¯†é’¥é€šè¿‡ç¯å¢ƒå˜é‡å®‰å…¨ä¼ é€’
- å¯ç”¨CORSä¿æŠ¤

### å¯†é’¥ç®¡ç†

- ä½¿ç”¨Zeaburçš„Secretç®¡ç†åŠŸèƒ½
- å®šæœŸè½®æ¢APIå¯†é’¥
- ç›‘æ§å¼‚å¸¸è®¿é—®è¡Œä¸º
- å¯ç”¨è®¿é—®æ—¥å¿—è®°å½•

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. åç«¯æœåŠ¡å¯åŠ¨å¤±è´¥

**ç—‡çŠ¶**: åç«¯æœåŠ¡æ— æ³•å¯åŠ¨æˆ–å¥åº·æ£€æŸ¥å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥æ—¥å¿—
zeabur logs nofx-backend

# å¸¸è§åŸå› ï¼š
# - ç¯å¢ƒå˜é‡é…ç½®é”™è¯¯
# - æ•°æ®åº“è¿æ¥å¤±è´¥
# - APIå¯†é’¥æ— æ•ˆ
```

#### 2. å‰ç«¯æ„å»ºå¤±è´¥

**ç—‡çŠ¶**: å‰ç«¯æ„å»ºè¿‡ç¨‹ä¸­å‡ºé”™

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥æ„å»ºæ—¥å¿—
zeabur logs nofx-frontend

# å¸¸è§åŸå› ï¼š
# - Nodeç‰ˆæœ¬ä¸å…¼å®¹
# - ä¾èµ–å®‰è£…å¤±è´¥
# - ç¯å¢ƒå˜é‡ç¼ºå¤±
```

#### 3. æ•°æ®åº“è¿æ¥é—®é¢˜

**ç—‡çŠ¶**: åç«¯æ— æ³•è¿æ¥æ•°æ®åº“

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
zeabur status nofx-database

# éªŒè¯è¿æ¥å­—ç¬¦ä¸²
echo $DATABASE_URL

# å¸¸è§åŸå› ï¼š
# - æ•°æ®åº“æœåŠ¡æœªå¯åŠ¨
# - è¿æ¥å­—ç¬¦ä¸²æ ¼å¼é”™è¯¯
# - ç½‘ç»œç­–ç•¥é˜»æ­¢è¿æ¥
```

#### 4. APIå¯†é’¥é”™è¯¯

**ç—‡çŠ¶**: äº¤æ˜“åŠŸèƒ½æ— æ³•æ­£å¸¸å·¥ä½œ

**è§£å†³æ–¹æ¡ˆ**:
```bash
# éªŒè¯APIå¯†é’¥é…ç½®
zeabur env list nofx-backend

# æµ‹è¯•APIè¿æ¥
curl -H "X-MBX-APIKEY: $BINANCE_API_KEY" https://api.binance.com/api/v3/account

# å¸¸è§åŸå› ï¼š
# - APIå¯†é’¥è¿‡æœŸæˆ–æ— æ•ˆ
# - æƒé™ä¸è¶³
# - IPç™½åå•é™åˆ¶
```

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹åç«¯æ—¥å¿—
zeabur logs nofx-backend --tail 100

# æŸ¥çœ‹å‰ç«¯æ—¥å¿—
zeabur logs nofx-frontend --tail 100

# æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—
zeabur logs nofx-database --tail 100

# å®æ—¶ç›‘æ§æ—¥å¿—
zeabur logs nofx-backend --follow
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### åç«¯ä¼˜åŒ–

1. **æ•°æ®åº“ä¼˜åŒ–**
   - æ·»åŠ é€‚å½“çš„ç´¢å¼•
   - ä½¿ç”¨è¿æ¥æ± 
   - å®šæœŸæ¸…ç†å†å²æ•°æ®

2. **ç¼“å­˜ç­–ç•¥**
   - ä½¿ç”¨Redisç¼“å­˜çƒ­ç‚¹æ•°æ®
   - å®ç°APIå“åº”ç¼“å­˜
   - ç¼“å­˜äº¤æ˜“å¯¹ä¿¡æ¯

3. **å¹¶å‘å¤„ç†**
   - ä½¿ç”¨Goroutineå¤„ç†å¹¶å‘è¯·æ±‚
   - å®ç°è¯·æ±‚é™æµ
   - ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢

### å‰ç«¯ä¼˜åŒ–

1. **æ„å»ºä¼˜åŒ–**
   - å¯ç”¨ä»£ç åˆ†å‰²
   - å‹ç¼©é™æ€èµ„æº
   - ä½¿ç”¨CDNåŠ é€Ÿ

2. **è¿è¡Œæ—¶ä¼˜åŒ–**
   - å®ç°ç»„ä»¶æ‡’åŠ è½½
   - ä¼˜åŒ–é‡æ¸²æŸ“
   - ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨

## ğŸ”„ æ›´æ–°å’Œç»´æŠ¤

### è‡ªåŠ¨éƒ¨ç½²

é…ç½®GitHub Actionsè‡ªåŠ¨éƒ¨ç½²ï¼š

```yaml
# .github/workflows/deploy.yml
name: Deploy to Zeabur

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Deploy to Zeabur
        run: |
          chmod +x deploy-zeabur.sh
          ./deploy-zeabur.sh
```

### æ•°æ®å¤‡ä»½

1. **è‡ªåŠ¨å¤‡ä»½**
   - æ•°æ®åº“æ¯æ—¥è‡ªåŠ¨å¤‡ä»½
   - ä¿ç•™30å¤©å¤‡ä»½å†å²
   - å¤‡ä»½å­˜å‚¨åœ¨äº‘ç«¯

2. **æ‰‹åŠ¨å¤‡ä»½**
   ```bash
   # å¯¼å‡ºæ•°æ®åº“
   zeabur db export nofx-database > backup.sql
   
   # æ¢å¤æ•°æ®åº“
   zeabur db import nofx-database < backup.sql
   ```

### ç‰ˆæœ¬ç®¡ç†

1. **è¯­ä¹‰åŒ–ç‰ˆæœ¬**
   - ä¸»ç‰ˆæœ¬ï¼šé‡å¤§æ¶æ„å˜æ›´
   - æ¬¡ç‰ˆæœ¬ï¼šæ–°åŠŸèƒ½æ·»åŠ 
   - ä¿®è®¢ç‰ˆæœ¬ï¼šBugä¿®å¤

2. **å‘å¸ƒæµç¨‹**
   ```bash
   # åˆ›å»ºå‘å¸ƒæ ‡ç­¾
   git tag -a v1.0.0 -m "Release version 1.0.0"
   git push origin v1.0.0
   
   # éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
   ./deploy-zeabur.sh production
   ```

## ğŸ“ æ”¯æŒå’Œè”ç³»

å¦‚æœåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. æ£€æŸ¥Zeaburå®˜æ–¹æ–‡æ¡£
3. æŸ¥çœ‹é¡¹ç›®GitHub Issues
4. è”ç³»æŠ€æœ¯æ”¯æŒå›¢é˜Ÿ

---

**æ³¨æ„**: è¯·ç¡®ä¿åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨çœŸå®çš„APIå¯†é’¥ï¼Œå¹¶å®šæœŸæ›´æ–°å®‰å…¨é…ç½®ã€‚